[tox]
requires =
    tox==4.15.0
env_list =
    type
    lint
    py310
    security

[testenv]
description = run unit tests
deps =
    coverage==7.5.3
commands =
    coverage run --branch --omit */tests/*,*/__init__.py -m unittest discover -s fakernaija/tests
    coverage report --omit */tests/*,*/__init__.py -m
    coverage html --omit */tests/*,*/__init__.py

[testenv:type]
description = run type checks
deps =
    mypy==1.10.0
commands =
    mypy {posargs:fakernaija}

[testenv:lint]
description = run lint checks
deps =
    ruff==0.4.5
    black==24.4.2
commands =
    black . --check
    ruff check --fix

[testenv:security]
description = run security checks
deps =
    bandit==1.7.4
commands =
    bandit --skip B311,B101 -r fakernaija
